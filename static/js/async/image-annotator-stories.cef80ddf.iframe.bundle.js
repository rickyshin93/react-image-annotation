"use strict";(self.webpackChunk_rockshin_react_image_annotation=self.webpackChunk_rockshin_react_image_annotation||[]).push([["904"],{"./stories/image-annotator.stories.ts":function(e,t,a){a.r(t),a.d(t,{WithMixedSizeImages:()=>A,WithPreExistingAnnotations:()=>v,WithCallbacks:()=>j,WithAutoTriggers:()=>S,WithSmallImage:()=>C,WithLargeImage:()=>N,WithFailedImageLoad:()=>E,WithMultipleImages:()=>I,default:()=>f,__namedExportsOrder:()=>k,WithCustomTools:()=>w,Basic:()=>b}),a("./node_modules/.pnpm/tldraw@3.6.1_@types+react@18.3.18_react-dom@18.3.1_react@18.3.1/node_modules/tldraw/tldraw.css");var n=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),r=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),s=a("./node_modules/.pnpm/tldraw@3.6.1_@types+react@18.3.18_react-dom@18.3.1_react@18.3.1/node_modules/tldraw/dist-esm/index.mjs"),o=a("./src/components/loading/index.tsx");let i=e=>{let{onClick:t}=e;return(0,n.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg z-[300] font-bold pointer-events-auto hover:bg-blue-600 m-2",onClick:t,children:"Done"})};i.__docgenInfo={description:"",methods:[],displayName:"CustomDoneButton",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var l=a("./node_modules/.pnpm/react-icons@5.4.0_react@18.3.1/node_modules/react-icons/gr/index.mjs");let d=e=>(0,n.jsxs)("div",{className:"flex h-10 z-[300] pointer-events-auto bg-[var(--color-low)] py-1 px-2 rounded-b-lg gap-2",children:[(0,n.jsx)("button",{className:"flex-none w-10 cursor-pointer px-2 hover:bg-[#00000010] rounded-lg",onClick:e.onPrevious,children:(0,n.jsx)(l.o8k,{color:"#2E2E2E",size:24})}),(0,n.jsxs)("span",{className:"flex items-center justify-center text-sm font-medium text-[var(--color-text-1)]",children:[e.currentIndex," / ",e.totalCount]}),(0,n.jsx)("button",{className:"flex-none w-10 cursor-pointer px-2 hover:bg-[#00000010] rounded-lg",onClick:e.onNext,children:(0,n.jsx)(l.zSJ,{className:"",size:24,color:"var(--color-text-1)"})})]});d.__docgenInfo={description:"",methods:[],displayName:"TopPanel",props:{onPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onNext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},currentIndex:{required:!0,tsType:{name:"number"},description:""},totalCount:{required:!0,tsType:{name:"number"},description:""}}};let c=async e=>{let t;if(e.startsWith("data:")){let a=e.split(",")[1],n=e.split(",")[0].split(":")[1].split(";")[0],r=atob(a),s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let e=0;e<r.length;e++)o[e]=r.charCodeAt(e);t=new Blob([s],{type:n})}else t=await fetch(e).then(e=>e.blob());let a=await s.P60.blobToDataUrl(t),{w:n,h:r}=await s.xeI.getImageSize(t);return{src:a,width:n,height:r,type:t.type}};function m(e,t){if(!e)return;let a=e.getShape(t);if(!a)return;let n=e.getCurrentPageId();a.parentId!==n&&e.moveShapesToPage([a],n);let r=e.getSortedChildIdsForParent(n);e.getShape(r[0]).id!==t&&e.sendToBack([a])}let u=e=>{if(!e)return[];let t=[];return e.getCurrentPageShapes().forEach(e=>{if("geo"===e.type&&"rectangle"===e.props.geo){let a={x:e.x,y:e.y,width:e.props.w,height:e.props.h},n={id:e.id,x:a.x,y:a.y,width:a.width,height:a.height,rotation:e.rotation||0,type:"rectangle",label:e.props.text||"",timestamp:Date.now(),metadata:{color:e.props.color||"default",createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};t.push(n)}}),t},p=async e=>{try{if(e.startsWith("data:image/")){let[t,a]=e.split(",");if(!t.includes("base64")||!a)throw Error("Invalid base64 image format")}else new URL(e)}catch(e){if(e instanceof Error&&"Invalid base64 image format"===e.message)throw e;throw Error("Invalid image URL")}let t=new Promise((e,t)=>{setTimeout(()=>t(Error("Image load timed out")),3e4)});try{return await Promise.race([c(e),t])}catch(e){if(e instanceof Error){if("Image load timed out"===e.message)throw Error(`Failed to load image within ${30} seconds`);if(e.message.includes("Failed to fetch")||e.message.includes("NetworkError"))throw Error("Network error: Unable to load image");if(e.message.includes("base64"))throw Error("Invalid base64 image data")}throw Error("Failed to load image")}},g=async e=>{let{imageIndex:t,images:a,setIsLoading:n,setImageLoadError:r,setImage:o,setUsedNumbers:i,setDeletedNumbers:l,onImageLoadError:d}=e;try{n(!0),r(null);let e=await p(a[t].src);o({...e,id:a[t].id||(0,s.ELf)()});let d=new Set;a[t].annotations.forEach(e=>{if(e.label){let t=parseInt(e.label);!isNaN(t)&&d.add(t)}}),i(d),l([])}catch(n){let e=n instanceof Error?n:Error("Failed to load image");console.error("Failed to load image:",e),r(e),null==d||d(e,{id:a[t].id||"",src:a[t].src,index:t})}finally{n(!1)}};function h(e){let{images:t,tools:a,initialImageIndex:l=0,outputTriggerOn:c,onDone:p,onAnnotationCreated:h,onAnnotationChange:f,onAnnotationDeleted:x,onImageChange:y,onImageLoadError:b}=e;if(0===t.length)return(0,n.jsx)("div",{children:"Please provided at least one image"});let{eraser:v,text:w}=a||{},[j,S]=(0,r.useState)(null),[I,N]=(0,r.useState)(null),[C,A]=(0,r.useState)(l<t.length?l:0),[E,k]=(0,r.useState)(null),[_,T]=(0,r.useState)(new Set),[q,D]=(0,r.useState)([]),W=(0,r.useRef)(!1),V=(0,r.useRef)(0),[P,L]=(0,r.useState)(!1),[B,F]=(0,r.useState)(null);(0,r.useEffect)(()=>{g({imageIndex:C,images:t,setIsLoading:L,setImageLoadError:F,setImage:k,setUsedNumbers:T,setDeletedNumbers:D,onImageLoadError:b})},[C,t,b]);(0,r.useEffect)(()=>{I&&j&&E&&t[C].annotations.forEach(e=>{var t,a;let n=e.id||(0,s.F17)();I.createShape({id:n,type:"geo",x:e.x,y:e.y,rotation:e.rotation,props:{geo:"rectangle",w:e.width,h:e.height,text:e.label||"",color:(null===(t=e.metadata)||void 0===t?void 0:t.color)||"default",labelColor:(null===(a=e.metadata)||void 0===a?void 0:a.color)||"default"}})})},[I,j,E]);let z=(0,r.useCallback)(async()=>{if(!I||!E)return;let e=u(I);null==p||p({annotations:e,image:{id:E.id,src:t[C].src}})},[p,I,E,t,C]),R=()=>{if(q.length>0){let e=Math.min(...q);return D(t=>t.filter(t=>t!==e)),T(t=>{let a=new Set(t);return a.add(e),a}),e.toString()}let e=1;for(;_.has(e);)e++;return e>999?(console.warn("Exceeded maximum number of annotations (999)"),"999"):(T(t=>{let a=new Set(t);return a.add(e),a}),e.toString())};(0,r.useEffect)(()=>{if(!I)return;let e=null,t=()=>{if(e){let t=I.getShape(e);if(t&&"geo"===t.type&&"rectangle"===t.props.geo){let e=R();I.updateShape({id:t.id,type:"geo",props:{...t.props,labelColor:"red",text:e}});let a={id:t.id,x:t.x,y:t.y,width:t.props.w,height:t.props.h,rotation:t.rotation||0,label:e,timestamp:Date.now(),metadata:{color:t.props.color,createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};null==h||h({image:{id:null==E?void 0:E.id},annotation:a}),(null==c?void 0:c.created)&&z()}e=null}},a=async(t,a)=>{if(W.current)return;let{prev:n}=a||{};if(!n||n.id===e)return;let r=Date.now();if("change"===t&&r-V.current<50)return;V.current=r;let s={id:n.id,x:n.x,y:n.y,width:n.props.w,height:n.props.h,rotation:n.rotation,label:n.props.text,timestamp:Date.now(),metadata:{color:n.props.color,createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};if("delete"===t){let e=parseInt(n.props.text);!isNaN(e)&&(D(t=>[...t,e].sort((e,t)=>e-t)),T(t=>{let a=new Set(t);return a.delete(e),a})),null==x||x({image:{id:null==E?void 0:E.id},annotation:s}),(null==c?void 0:c.deleted)&&z()}else"change"===t&&(null==f||f({image:{id:null==E?void 0:E.id},annotation:s}),(null==c?void 0:c.changed)&&z())},n=(0,s.DsO)(()=>{z()},50),r=(0,s.DsO)(a,100),o=I.sideEffects.registerAfterCreateHandler("shape",t=>{"geo"===t.type&&"rectangle"===t.props.geo&&(e=t.id)}),i=I.sideEffects.registerAfterChangeHandler("shape",(e,t)=>r("change",{prev:e,next:t})),l=I.sideEffects.registerAfterDeleteHandler("shape",e=>a("delete",{prev:e}));return I.on("event",e=>{"pointer_up"===e.name&&t()}),()=>{o(),i(),l(),n.cancel(),r.cancel()}},[I,j,u,z,R]),(0,r.useEffect)(()=>{if(!I||!E)return;let e=s.Ykc.createId();I.createAssets([{id:e,typeName:"asset",type:"image",meta:{},props:{w:E.width,h:E.height,mimeType:E.type,src:E.src,name:`image-${e}`,isAnimated:!1}}]);let t=(0,s.F17)();I.createShape({id:t,type:"image",x:0,y:0,isLocked:!0,props:{w:E.width,h:E.height,assetId:e}});let a=I.sideEffects.registerAfterCreateHandler("shape",()=>m(I,t)),n=I.sideEffects.registerAfterChangeHandler("shape",()=>m(I,t)),r=I.sideEffects.registerBeforeChangeHandler("shape",(e,a)=>a.id!==t||a.isLocked?a:{...e,isLocked:!0});return I.clearHistory(),S(t),()=>{n(),a(),r()}},[I,null==E?void 0:E.id]),(0,r.useEffect)(()=>{I&&E&&j&&(I.setCameraOptions({constraints:{initialZoom:"fit-max-100",baseZoom:"default",bounds:{w:E.width,h:E.height,x:0,y:0},padding:{x:16,y:16},origin:{x:.5,y:.5},behavior:"free"},zoomSteps:[.5,1,2,4,8],zoomSpeed:1,panSpeed:1,isLocked:!1}),I.setCamera(I.getCamera(),{reset:!0}))},[I,j,E]);let H=(0,r.useCallback)(e=>{W.current=!0,A(a=>"prev"===e?0===a?t.length-1:a-1:a===t.length-1?0:a+1),null==I||I.run(()=>{null==I||I.deleteShapes(Array.from(I.getCurrentPageShapeIds()))},{ignoreShapeLock:!0}),S(null),setTimeout(()=>{W.current=!1},100)},[I,t.length]),M=(0,r.useCallback)(()=>H("prev"),[H]),O=(0,r.useCallback)(()=>H("next"),[H]);return(0,r.useEffect)(()=>{null==y||y({index:C,image:{id:t[C].id||"",src:t[C].src}})},[C]),(0,r.useEffect)(()=>{W.current&&I&&E&&setTimeout(()=>{z()},100)},[C]),(0,r.useEffect)(()=>{W.current&&(k(null),(async()=>{try{L(!0),F(null),await g({imageIndex:C,images:t,setIsLoading:L,setImageLoadError:F,setImage:k,setUsedNumbers:T,setDeletedNumbers:D,onImageLoadError:b})}catch(e){}finally{L(!1)}})())},[C,t,b,W.current]),(0,n.jsxs)("div",{className:"absolute inset-0",children:[B&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-50",children:(0,n.jsxs)("div",{className:"text-center p-4",children:[(0,n.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,n.jsx)("span",{className:"mr-2",children:`Failed to load image ${C+1} of ${t.length}:`}),(0,n.jsx)("span",{className:"text-gray-600",children:B.message})]}),(0,n.jsxs)("div",{className:"space-x-2",children:[(0,n.jsx)("button",{onClick:()=>{g({imageIndex:C,images:t,setIsLoading:L,setImageLoadError:F,setImage:k,setUsedNumbers:T,setDeletedNumbers:D,onImageLoadError:b})},className:"px-4 py-2 rounded-3xl border border-blue-500 text-blue-500 hover:bg-blue-50 leading-[24px]",children:"Retry"}),C>0&&(0,n.jsx)("button",{onClick:()=>M(),className:"px-4 py-2 bg-blue-500 text-white rounded-3xl hover:bg-blue-600",children:"Prev Image"}),C<t.length-1&&(0,n.jsx)("button",{onClick:()=>O(),className:"px-4 py-2 bg-blue-500 text-white rounded-3xl hover:bg-blue-600",children:"Next Images"})]})]})}),P&&(0,n.jsx)("div",{className:"absolute top-12 bottom-12 left-0 right-0 flex items-center justify-center z-50",children:(0,n.jsx)(o.Z,{isLoading:!0,loadingText:`Loading image ${C+1} of ${t.length}...`,className:"w-[300px] bg-gradient-to-r from-blue-50 to-sky-50",loadingSpinnerClassName:"border-blue-500",progressBarClassName:"bg-gradient-to-r from-blue-500 to-sky-500"})}),(0,n.jsx)(s.DrV,{onMount:function(e){N(e),e.setStyleForNextShapes(s.R_W,"red"),e.setStyleForNextShapes(s.ST$,"s"),e.setStyleForNextShapes(s.Y8S,"mono")},components:{Toolbar:e=>{let t=(0,s.b55)(),a=(0,s.EA)(t.select),r=(0,s.EA)(t.rectangle),o=(0,s.EA)(t.text),i=(0,s.EA)(t.eraser),l=(0,s.EA)(t.hand);return(0,n.jsxs)(s.DhQ,{...e,children:[(0,n.jsx)(s.hEi,{...t.select,isSelected:a}),(0,n.jsx)(s.hEi,{...t.hand,isSelected:l}),(null==v?void 0:v.enabled)&&(0,n.jsx)(s.hEi,{...t.eraser,isSelected:i}),(null==w?void 0:w.enabled)&&(0,n.jsx)(s.hEi,{...t.text,isSelected:o}),(0,n.jsx)(s.hEi,{...t.rectangle,isSelected:r})]})},PageMenu:null,ActionsMenu:null,StylePanel:null,TopPanel:(0,r.useCallback)(()=>(0,n.jsx)(d,{onPrevious:M,onNext:O,currentIndex:C+1,totalCount:t.length}),[j,p,C]),SharePanel:(0,r.useCallback)(()=>(0,n.jsx)(i,{onClick:z}),[j,i])}})]})}h.__docgenInfo={description:"",methods:[],displayName:"ImageAnnotationEditor",props:{images:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id?: string\n  src: string\n  annotations: Annotation[]\n}",signature:{properties:[{key:"id",value:{name:"string",required:!1}},{key:"src",value:{name:"string",required:!0}},{key:"annotations",value:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]",required:!0}}]}}],raw:"{\n  id?: string\n  src: string\n  annotations: Annotation[]\n}[]"},description:""},initialImageIndex:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},tools:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  eraser?: {\n    enabled?: boolean\n  }\n  text?: {\n    enabled?: boolean\n  }\n}",signature:{properties:[{key:"eraser",value:{name:"signature",type:"object",raw:"{\n  enabled?: boolean\n}",signature:{properties:[{key:"enabled",value:{name:"boolean",required:!1}}]},required:!1}},{key:"text",value:{name:"signature",type:"object",raw:"{\n  enabled?: boolean\n}",signature:{properties:[{key:"enabled",value:{name:"boolean",required:!1}}]},required:!1}}]}},description:""},outputTriggerOn:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  created?: boolean\n  changed?: boolean\n  deleted?: boolean\n}",signature:{properties:[{key:"created",value:{name:"boolean",required:!1}},{key:"changed",value:{name:"boolean",required:!1}},{key:"deleted",value:{name:"boolean",required:!1}}]}},description:""},onImageLoadError:{required:!1,tsType:{name:"signature",type:"function",raw:"(error: Error, image: { id: string; src: string; index: number }) => void",signature:{arguments:[{type:{name:"Error"},name:"error"},{type:{name:"signature",type:"object",raw:"{ id: string; src: string; index: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"src",value:{name:"string",required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:"image"}],return:{name:"void"}}},description:""}}};let f={title:"Components/ImageAnnotator",component:h,parameters:{layout:"centered"},tags:["autodocs"]},x=[{id:"image0",src:"https://fastly.picsum.photos/id/930/900/600.jpg?hmac=-VvyG-XjlLRggW6xtMd4UHBwxXJ-O8g7EVRpKm9DW0s",annotations:[{id:"shape:s-MMqyY_DlysR5i_Dr-cw",x:570.6616220075775,y:234.7749303606369,width:198.69671630859375,height:131.31036376953125,rotation:5.3756140961425345,type:"rectangle",label:"5",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:1-yh2opbFbOpEprcNPdKS",x:83.45930325359515,y:193.02561725714776,width:124.84748947006867,height:123.61206136850944,rotation:5.3756140961425345,type:"rectangle",label:"1",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:Hp9GrZ00ldwLN0CpWkcXY",x:154.38957623531536,y:305.0142249484778,width:248.734083670453,height:229.15347678557805,rotation:0,type:"rectangle",label:"2",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:sw4HvspZ2ScsJ68k6Ejm7",x:451.2897707321237,y:142.1256360707238,width:129.70425985164417,height:108.62586997703193,rotation:5.3930673886624785,type:"rectangle",label:"3",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:cPtiRk5d-0bboKDQSoMO9",x:586.2918704226382,y:368.4326594858195,width:278.90842602679845,height:142.37716236564358,rotation:.29670597283903605,type:"rectangle",label:"4",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:5NSqVehqe8IlFmYaW7PsP",x:308.8582223671702,y:260.60060508073525,width:154.5696085710519,height:182.23682110566017,rotation:0,type:"rectangle",label:"6",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}}]},{id:"image1",src:"https://fastly.picsum.photos/id/106/900/600.jpg?hmac=xA_tP1jGHJrWhLPmViP6lnLck6pqCmDXQP8Q9H1IPgs",annotations:[]},{id:"image2",src:"https://fastly.picsum.photos/id/574/800/601.jpg?hmac=DZb2oYbpWGCSpPwqhs4_H0Uvk2VoizaQWddhQIVhRFE",annotations:[]},{id:"image3",src:"https://fastly.picsum.photos/id/372/800/600.jpg?hmac=911lXwSe0NWznaFWKm3nVrZV7y1IypKxlpDUIVpKxVs",annotations:[]},{id:"image4",src:"https://fastly.picsum.photos/id/1057/800/600.jpg?hmac=YmA5NCeEgXc1TOldOXFtXzaMW1NWH-IG92zNgLmTcDQ",annotations:[]},{id:"image5",src:"https://fastly.picsum.photos/id/705/900/600.jpg?hmac=bzZzT6Zhu_ybVXbEhA8WipVgd9fxGXYNmZgaApMKHBY",annotations:[]}],y=[{id:"image1",src:"https://fastly.picsum.photos/id/727/800/602.jpg?hmac=TXud4Hami5cc6oxCzbuVUHoTIeP-nNVcU8A1VtS11XE",annotations:[{id:"shape:1",x:100,y:100,width:200,height:150,rotation:0,label:"1",timestamp:Date.now(),metadata:{color:"red",createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}}]}],b={args:{images:x}},v={args:{images:y}},w={args:{images:x,tools:{eraser:{enabled:!0},text:{enabled:!0}}}},j={args:{images:x,outputTriggerOn:{created:!0,changed:!0,deleted:!0},onAnnotationCreated:e=>{console.log("Annotation created:",e)},onAnnotationChange:e=>{console.log("Annotation changed:",e)},onAnnotationDeleted:e=>{console.log("Annotation deleted:",e)},onImageChange:e=>{console.log("Image changed:",e)},onDone:e=>{console.log("Done clicked:",e)}}},S={args:{images:x,outputTriggerOn:{created:!0,changed:!0,deleted:!0},onDone:e=>{console.log("Auto-triggered on change:",e)}}},I={args:{images:[,,,,,].fill(null).map((e,t)=>({id:`image${t+1}`,src:`https://picsum.photos/800/${600+t}`,annotations:[]})),initialImageIndex:0}},N={args:{images:[{id:"large-image",src:"https://picsum.photos/2000/1500",annotations:[]}]}},C={args:{images:[{id:"small-image",src:"https://picsum.photos/400/300",annotations:[]}]}},A={args:{images:[{id:"small",src:"https://picsum.photos/400/300",annotations:[]},{id:"medium",src:"https://picsum.photos/800/600",annotations:[]},{id:"large",src:"https://picsum.photos/1600/1200",annotations:[]}]}},E={args:{initialImageIndex:1,images:[{id:"valid-image",src:"https://picsum.photos/800/600",annotations:[]},{id:"failed-image",src:"https://invalid-image-url.jpg",annotations:[]},{id:"valid-image",src:"https://picsum.photos/800/600",annotations:[]}]}},k=["Basic","WithPreExistingAnnotations","WithCustomTools","WithCallbacks","WithAutoTriggers","WithMultipleImages","WithLargeImage","WithSmallImage","WithMixedSizeImages","WithFailedImageLoad"];b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages\n  }\n}",...b.parameters?.docs?.source}}},v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: imagesWithAnnotations\n  }\n}",...v.parameters?.docs?.source}}},w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    tools: {\n      eraser: {\n        enabled: true\n      },\n      text: {\n        enabled: true\n      }\n    }\n  }\n}",...w.parameters?.docs?.source}}},j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    outputTriggerOn: {\n      created: true,\n      changed: true,\n      deleted: true\n    },\n    onAnnotationCreated: annotation => {\n      console.log('Annotation created:', annotation);\n    },\n    onAnnotationChange: annotation => {\n      console.log('Annotation changed:', annotation);\n    },\n    onAnnotationDeleted: annotation => {\n      console.log('Annotation deleted:', annotation);\n    },\n    onImageChange: data => {\n      console.log('Image changed:', data);\n    },\n    onDone: data => {\n      console.log('Done clicked:', data);\n    }\n  }\n}",...j.parameters?.docs?.source}}},S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    outputTriggerOn: {\n      created: true,\n      changed: true,\n      deleted: true\n    },\n    onDone: data => {\n      console.log('Auto-triggered on change:', data);\n    }\n  }\n}",...S.parameters?.docs?.source}}},I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: Array(5).fill(null).map((_, i) => ({\n      id: `image${i + 1}`,\n      src: `https://picsum.photos/800/${600 + i}`,\n      annotations: []\n    })),\n    initialImageIndex: 0\n  }\n}",...I.parameters?.docs?.source}}},N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'large-image',\n      src: 'https://picsum.photos/2000/1500',\n      annotations: []\n    }]\n  }\n}",...N.parameters?.docs?.source}}},C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'small-image',\n      src: 'https://picsum.photos/400/300',\n      annotations: []\n    }]\n  }\n}",...C.parameters?.docs?.source}}},A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'small',\n      src: 'https://picsum.photos/400/300',\n      annotations: []\n    }, {\n      id: 'medium',\n      src: 'https://picsum.photos/800/600',\n      annotations: []\n    }, {\n      id: 'large',\n      src: 'https://picsum.photos/1600/1200',\n      annotations: []\n    }]\n  }\n}",...A.parameters?.docs?.source}}},E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialImageIndex: 1,\n    images: [{\n      id: 'valid-image',\n      src: 'https://picsum.photos/800/600',\n      annotations: []\n    }, {\n      id: 'failed-image',\n      // Using an invalid URL to simulate a failed image load\n      src: 'https://invalid-image-url.jpg',\n      annotations: []\n    }, {\n      id: 'valid-image',\n      src: 'https://picsum.photos/800/600',\n      annotations: []\n    }]\n  }\n}",...E.parameters?.docs?.source}}}},"./src/components/loading/index.tsx":function(e,t,a){a.d(t,{Z:()=>p});var n=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),r=a("./node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),s=a("./node_modules/.pnpm/motion@11.17.0_react-dom@18.3.1_react@18.3.1/node_modules/motion/dist/es/framer-motion/dist/es/render/components/motion/proxy.mjs"),o=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");let i=100,l=2,d=300,c=90,m="Loading...",u=!0;function p(e){let{loadingText:t=m,className:a="",content:p="",children:g,isLoading:h=!1,progressInterval:f=i,progressIncrement:x=l,expandDelay:y=d,maxAutoProgress:b=c,autoProgress:v=u,contentClassName:w="",loadingSpinnerClassName:j="",progressBarClassName:S=""}=e,[I,N]=(0,o.useState)({progress:0,showContent:!1,expanded:!1}),C=(0,o.useRef)(null),[A,E]=(0,o.useState)(0);return(0,o.useEffect)(()=>{h?N({progress:0,showContent:!1,expanded:!1}):(p||g)&&(N(e=>({...e,showContent:!0})),setTimeout(()=>{N(e=>({...e,expanded:!0}))},y))},[h,p,g,y]),(0,o.useEffect)(()=>{if(!v||!h)return;let e=setInterval(()=>{N(e=>({...e,progress:e.progress>=b?b:e.progress+x}))},f);return()=>clearInterval(e)},[h,v,b,x,f]),(0,o.useEffect)(()=>{!h&&I.progress<100&&N(e=>({...e,progress:100}))},[h]),(0,o.useEffect)(()=>{C.current&&E(C.current.scrollHeight+32)},[I.showContent]),(0,n.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,n.jsx)("div",{className:"transition-all duration-500 ease-out transform",children:(0,n.jsx)(s.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:(0,r.W)("relative bg-white overflow-hidden","transition-all duration-500 ease-in-out",I.showContent?"rounded-[16px] border border-[#e5e7eb]":"rounded-2xl border border-[#e5e7eb]",I.expanded?"transform-none":"scale-95 opacity-90","shadow-sm",I.showContent&&"animate-expand-width",a),style:{height:I.expanded?A||"auto":"40px"},children:(0,n.jsx)("div",{className:(0,r.W)("px-6 flex items-center h-full justify-between","transition-all duration-500 ease-in-out",I.showContent&&"animate-slide-content",I.showContent&&"py-4"),children:I.showContent?g?(0,n.jsx)("div",{ref:C,className:(0,r.W)("w-full transition-all duration-500 ease-in-out",I.expanded?"opacity-100":"opacity-0",w),children:g}):p?(0,n.jsx)("div",{ref:C,className:(0,r.W)("w-full transition-all duration-500 ease-in-out",I.expanded?"opacity-100":"opacity-0",w),children:(0,n.jsx)("div",{className:"prose prose-gray max-w-none py-4",children:p.split("\n\n").map((e,t)=>(0,n.jsx)("p",{className:"mb-4 text-[#181b25] leading-relaxed",children:e},t))})}):null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("span",{className:"text-[14px] font-medium text-[#181b25] whitespace-nowrap",children:t})}),(0,n.jsx)(s.E.div,{className:(0,r.W)("h-4 w-4 border-2 border-[#9672e4] border-t-transparent rounded-full ml-3",j),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,n.jsx)("div",{className:(0,r.W)("absolute bottom-0 left-0 h-[2px] bg-gradient-to-r from-[#9672e4] to-[#e0daff] transition-all duration-100",S),style:{width:`${I.progress}%`}})]})})})})})}p.__docgenInfo={description:"",methods:[],displayName:"Loading",props:{loadingText:{required:!1,tsType:{name:"string"},description:"Text displayed during the loading state",defaultValue:{value:"'Loading...'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Additional className for the main container",defaultValue:{value:"''",computed:!1}},content:{required:!1,tsType:{name:"string"},description:"Content to display after loading completes. Can be a string or React nodes",defaultValue:{value:"''",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"React nodes to display after loading completes"},isLoading:{required:!1,tsType:{name:"boolean"},description:"Controls the loading state",defaultValue:{value:"false",computed:!1}},progressInterval:{required:!1,tsType:{name:"number"},description:"Interval (in ms) between progress updates. Default: 100",defaultValue:{value:"100",computed:!1}},progressIncrement:{required:!1,tsType:{name:"number"},description:"Amount to increment progress by each interval. Default: 2",defaultValue:{value:"2",computed:!1}},expandDelay:{required:!1,tsType:{name:"number"},description:"Delay (in ms) before expanding the container to show content. Default: 300",defaultValue:{value:"300",computed:!1}},maxAutoProgress:{required:!1,tsType:{name:"number"},description:"Maximum progress value for auto-progress. Default: 90",defaultValue:{value:"90",computed:!1}},autoProgress:{required:!1,tsType:{name:"boolean"},description:"Enable/disable automatic progress animation. Default: true",defaultValue:{value:"true",computed:!1}},contentClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the content container",defaultValue:{value:"''",computed:!1}},loadingSpinnerClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the loading spinner",defaultValue:{value:"''",computed:!1}},progressBarClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the progress bar",defaultValue:{value:"''",computed:!1}}}}}}]);