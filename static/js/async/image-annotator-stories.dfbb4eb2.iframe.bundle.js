"use strict";(self.webpackChunk_rockshin_react_image_annotation=self.webpackChunk_rockshin_react_image_annotation||[]).push([["904"],{"./stories/image-annotator.stories.ts":function(e,t,a){a.r(t),a.d(t,{WithMixedSizeImages:()=>j,WithPreExistingAnnotations:()=>y,WithCallbacks:()=>w,WithAutoTriggers:()=>v,WithSmallImage:()=>C,WithLargeImage:()=>A,WithMultipleImages:()=>S,default:()=>g,__namedExportsOrder:()=>N,WithCustomTools:()=>b,Basic:()=>x}),a("./node_modules/.pnpm/tldraw@3.6.1_@types+react@18.3.18_react-dom@18.3.1_react@18.3.1/node_modules/tldraw/tldraw.css");var n=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),o=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),r=a("./node_modules/.pnpm/tldraw@3.6.1_@types+react@18.3.18_react-dom@18.3.1_react@18.3.1/node_modules/tldraw/dist-esm/index.mjs"),s=a("./src/components/loading/index.tsx");let i=e=>{let{onClick:t}=e;return(0,n.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg z-[300] font-bold pointer-events-auto hover:bg-blue-600 m-2",onClick:t,children:"Done"})};i.__docgenInfo={description:"",methods:[],displayName:"CustomDoneButton",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var d=a("./node_modules/.pnpm/react-icons@5.4.0_react@18.3.1/node_modules/react-icons/gr/index.mjs");let l=e=>(0,n.jsxs)("div",{className:"flex h-10 z-[300] pointer-events-auto bg-[var(--color-low)] py-1 px-2 rounded-b-lg gap-2",children:[(0,n.jsx)("button",{className:"flex-none w-10 cursor-pointer px-2 hover:bg-[#00000010] rounded-lg",onClick:e.onPrevious,children:(0,n.jsx)(d.o8k,{color:"#2E2E2E",size:24})}),(0,n.jsxs)("span",{className:"flex items-center justify-center text-sm font-medium text-[var(--color-text-1)]",children:[e.currentIndex," / ",e.totalCount]}),(0,n.jsx)("button",{className:"flex-none w-10 cursor-pointer px-2 hover:bg-[#00000010] rounded-lg",onClick:e.onNext,children:(0,n.jsx)(d.zSJ,{className:"",size:24,color:"var(--color-text-1)"})})]});l.__docgenInfo={description:"",methods:[],displayName:"TopPanel",props:{onPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onNext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},currentIndex:{required:!0,tsType:{name:"number"},description:""},totalCount:{required:!0,tsType:{name:"number"},description:""}}};let c=async e=>{let t;if(e.startsWith("data:")){let a=e.split(",")[1],n=e.split(",")[0].split(":")[1].split(";")[0],o=atob(a),r=new ArrayBuffer(o.length),s=new Uint8Array(r);for(let e=0;e<o.length;e++)s[e]=o.charCodeAt(e);t=new Blob([r],{type:n})}else t=await fetch(e).then(e=>e.blob());let a=await r.P60.blobToDataUrl(t),{w:n,h:o}=await r.xeI.getImageSize(t);return{src:a,width:n,height:o,type:t.type}};function p(e,t){if(!e)return;let a=e.getShape(t);if(!a)return;let n=e.getCurrentPageId();a.parentId!==n&&e.moveShapesToPage([a],n);let o=e.getSortedChildIdsForParent(n);e.getShape(o[0]).id!==t&&e.sendToBack([a])}let u=e=>{if(!e)return[];let t=[];return e.getCurrentPageShapes().forEach(e=>{if("geo"===e.type&&"rectangle"===e.props.geo){let a={x:e.x,y:e.y,width:e.props.w,height:e.props.h},n={id:e.id,x:a.x,y:a.y,width:a.width,height:a.height,rotation:e.rotation||0,type:"rectangle",label:e.props.text||"",timestamp:Date.now(),metadata:{color:e.props.color||"default",createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};t.push(n)}}),t};function m(e){let{images:t,tools:a,initialImageIndex:d=0,outputTriggerOn:m,onDone:g,onAnnotationCreated:h,onAnnotationChange:f,onAnnotationDeleted:x,onImageChange:y}=e;if(0===t.length)return(0,n.jsx)("div",{children:"Please provided at least one image"});let{eraser:b,text:w}=a||{},[v,S]=(0,o.useState)(null),[A,C]=(0,o.useState)(null),[j,N]=(0,o.useState)(d<t.length?d:0),[_,I]=(0,o.useState)(null),[T,E]=(0,o.useState)(new Set),[k,D]=(0,o.useState)([]),V=(0,o.useRef)(!1),q=(0,o.useRef)(0),[W,P]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{P(!0);let e=await c(t[j].src);I({...e,id:t[j].id||(0,r.ELf)()});let a=new Set;t[j].annotations.forEach(e=>{if(e.label){let t=parseInt(e.label);!isNaN(t)&&a.add(t)}}),E(a),D([])}catch(e){console.error("Failed to load image:",e)}finally{P(!1)}})()},[j,t]);(0,o.useEffect)(()=>{A&&v&&_&&t[j].annotations.forEach(e=>{var t,a;let n=e.id||(0,r.F17)();A.createShape({id:n,type:"geo",x:e.x,y:e.y,rotation:e.rotation,props:{geo:"rectangle",w:e.width,h:e.height,text:e.label||"",color:(null===(t=e.metadata)||void 0===t?void 0:t.color)||"default",labelColor:(null===(a=e.metadata)||void 0===a?void 0:a.color)||"default"}})})},[A,v,_]);let B=(0,o.useCallback)(async()=>{if(!A||!_)return;let e=u(A);null==g||g({annotations:e,image:{id:_.id,src:t[j].src}})},[g,A,_,t,j]),L=()=>{if(k.length>0){let e=Math.min(...k);return D(t=>t.filter(t=>t!==e)),E(t=>{let a=new Set(t);return a.add(e),a}),e.toString()}let e=1;for(;T.has(e);)e++;return e>999?(console.warn("Exceeded maximum number of annotations (999)"),"999"):(E(t=>{let a=new Set(t);return a.add(e),a}),e.toString())};(0,o.useEffect)(()=>{if(!A)return;let e=null,t=()=>{if(e){let t=A.getShape(e);if(t&&"geo"===t.type&&"rectangle"===t.props.geo){let e=L();A.updateShape({id:t.id,type:"geo",props:{...t.props,labelColor:"red",text:e}});let a={id:t.id,x:t.x,y:t.y,width:t.props.w,height:t.props.h,rotation:t.rotation||0,label:e,timestamp:Date.now(),metadata:{color:t.props.color,createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};null==h||h({image:{id:null==_?void 0:_.id},annotation:a}),(null==m?void 0:m.created)&&B()}e=null}},a=async(t,a)=>{if(V.current)return;let{prev:n}=a||{};if(!n||n.id===e)return;let o=Date.now();if("change"===t&&o-q.current<50)return;q.current=o;let r={id:n.id,x:n.x,y:n.y,width:n.props.w,height:n.props.h,rotation:n.rotation,label:n.props.text,timestamp:Date.now(),metadata:{color:n.props.color,createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}};if("delete"===t){let e=parseInt(n.props.text);!isNaN(e)&&(D(t=>[...t,e].sort((e,t)=>e-t)),E(t=>{let a=new Set(t);return a.delete(e),a})),null==x||x({image:{id:null==_?void 0:_.id},annotation:r}),(null==m?void 0:m.deleted)&&B()}else"change"===t&&(null==f||f({image:{id:null==_?void 0:_.id},annotation:r}),(null==m?void 0:m.changed)&&B())},n=(0,r.DsO)(()=>{B()},50),o=(0,r.DsO)(a,100),s=A.sideEffects.registerAfterCreateHandler("shape",t=>{"geo"===t.type&&"rectangle"===t.props.geo&&(e=t.id)}),i=A.sideEffects.registerAfterChangeHandler("shape",(e,t)=>o("change",{prev:e,next:t})),d=A.sideEffects.registerAfterDeleteHandler("shape",e=>a("delete",{prev:e}));return A.on("event",e=>{"pointer_up"===e.name&&t()}),()=>{s(),i(),d(),n.cancel(),o.cancel()}},[A,v,u,B,L]),(0,o.useEffect)(()=>{if(!A||!_)return;let e=r.Ykc.createId();A.createAssets([{id:e,typeName:"asset",type:"image",meta:{},props:{w:_.width,h:_.height,mimeType:_.type,src:_.src,name:`image-${e}`,isAnimated:!1}}]);let t=(0,r.F17)();A.createShape({id:t,type:"image",x:0,y:0,isLocked:!0,props:{w:_.width,h:_.height,assetId:e}});let a=A.sideEffects.registerAfterCreateHandler("shape",()=>p(A,t)),n=A.sideEffects.registerAfterChangeHandler("shape",()=>p(A,t)),o=A.sideEffects.registerBeforeChangeHandler("shape",(e,a)=>a.id!==t||a.isLocked?a:{...e,isLocked:!0});return A.clearHistory(),S(t),()=>{n(),a(),o()}},[A,null==_?void 0:_.id]),(0,o.useEffect)(()=>{A&&_&&v&&(A.setCameraOptions({constraints:{initialZoom:"fit-max-100",baseZoom:"default",bounds:{w:_.width,h:_.height,x:0,y:0},padding:{x:16,y:16},origin:{x:.5,y:.5},behavior:"free"},zoomSteps:[.5,1,2,4,8],zoomSpeed:1,panSpeed:1,isLocked:!1}),A.setCamera(A.getCamera(),{reset:!0}))},[A,v,_]);let z=(0,o.useCallback)(e=>{V.current=!0,null==A||A.run(()=>{null==A||A.deleteShapes(Array.from(A.getCurrentPageShapeIds()))},{ignoreShapeLock:!0}),S(null),N(a=>"prev"===e?0===a?t.length-1:a-1:a===t.length-1?0:a+1),setTimeout(()=>{V.current=!1},100)},[A,t.length]),H=(0,o.useCallback)(()=>z("prev"),[z]),M=(0,o.useCallback)(()=>z("next"),[z]);return(0,o.useEffect)(()=>{null==y||y({index:j,image:{id:t[j].id||"",src:t[j].src}})},[j]),(0,o.useEffect)(()=>{V.current&&A&&_&&setTimeout(()=>{B()},100)},[j]),(0,n.jsxs)("div",{className:"absolute inset-0",children:[W&&(0,n.jsx)("div",{className:"absolute top-12 bottom-12 left-0 right-0 flex items-center justify-center z-50",children:(0,n.jsx)(s.Z,{isLoading:!0,loadingText:"Loading image...",className:"w-[200px]"})}),(0,n.jsx)(r.DrV,{onMount:function(e){C(e),e.setStyleForNextShapes(r.R_W,"red"),e.setStyleForNextShapes(r.ST$,"s"),e.setStyleForNextShapes(r.Y8S,"mono")},components:{Toolbar:e=>{let t=(0,r.b55)(),a=(0,r.EA)(t.select),o=(0,r.EA)(t.rectangle),s=(0,r.EA)(t.text),i=(0,r.EA)(t.eraser),d=(0,r.EA)(t.hand);return(0,n.jsxs)(r.DhQ,{...e,children:[(0,n.jsx)(r.hEi,{...t.select,isSelected:a}),(0,n.jsx)(r.hEi,{...t.hand,isSelected:d}),(null==b?void 0:b.enabled)&&(0,n.jsx)(r.hEi,{...t.eraser,isSelected:i}),(null==w?void 0:w.enabled)&&(0,n.jsx)(r.hEi,{...t.text,isSelected:s}),(0,n.jsx)(r.hEi,{...t.rectangle,isSelected:o})]})},PageMenu:null,ActionsMenu:null,StylePanel:null,TopPanel:(0,o.useCallback)(()=>(0,n.jsx)(l,{onPrevious:H,onNext:M,currentIndex:j+1,totalCount:t.length}),[v,g]),SharePanel:(0,o.useCallback)(()=>(0,n.jsx)(i,{onClick:B}),[v,i])}})]})}m.__docgenInfo={description:"",methods:[],displayName:"ImageAnnotationEditor",props:{images:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id?: string\n  src: string\n  annotations: Annotation[]\n}",signature:{properties:[{key:"id",value:{name:"string",required:!1}},{key:"src",value:{name:"string",required:!0}},{key:"annotations",value:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]",required:!0}}]}}],raw:"{\n  id?: string\n  src: string\n  annotations: Annotation[]\n}[]"},description:""},initialImageIndex:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},tools:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  eraser?: {\n    enabled?: boolean\n  }\n  text?: {\n    enabled?: boolean\n  }\n}",signature:{properties:[{key:"eraser",value:{name:"signature",type:"object",raw:"{\n  enabled?: boolean\n}",signature:{properties:[{key:"enabled",value:{name:"boolean",required:!1}}]},required:!1}},{key:"text",value:{name:"signature",type:"object",raw:"{\n  enabled?: boolean\n}",signature:{properties:[{key:"enabled",value:{name:"boolean",required:!1}}]},required:!1}}]}},description:""},outputTriggerOn:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  created?: boolean\n  changed?: boolean\n  deleted?: boolean\n}",signature:{properties:[{key:"created",value:{name:"boolean",required:!1}},{key:"changed",value:{name:"boolean",required:!1}},{key:"deleted",value:{name:"boolean",required:!1}}]}},description:""}}};let g={title:"Components/ImageAnnotator",component:m,parameters:{layout:"fullscreen"}},h=[{id:"image0",src:"https://fastly.picsum.photos/id/930/900/600.jpg?hmac=-VvyG-XjlLRggW6xtMd4UHBwxXJ-O8g7EVRpKm9DW0s",annotations:[{id:"shape:s-MMqyY_DlysR5i_Dr-cw",x:570.6616220075775,y:234.7749303606369,width:198.69671630859375,height:131.31036376953125,rotation:5.3756140961425345,type:"rectangle",label:"5",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:1-yh2opbFbOpEprcNPdKS",x:83.45930325359515,y:193.02561725714776,width:124.84748947006867,height:123.61206136850944,rotation:5.3756140961425345,type:"rectangle",label:"1",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:Hp9GrZ00ldwLN0CpWkcXY",x:154.38957623531536,y:305.0142249484778,width:248.734083670453,height:229.15347678557805,rotation:0,type:"rectangle",label:"2",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:sw4HvspZ2ScsJ68k6Ejm7",x:451.2897707321237,y:142.1256360707238,width:129.70425985164417,height:108.62586997703193,rotation:5.3930673886624785,type:"rectangle",label:"3",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:cPtiRk5d-0bboKDQSoMO9",x:586.2918704226382,y:368.4326594858195,width:278.90842602679845,height:142.37716236564358,rotation:.29670597283903605,type:"rectangle",label:"4",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}},{id:"shape:5NSqVehqe8IlFmYaW7PsP",x:308.8582223671702,y:260.60060508073525,width:154.5696085710519,height:182.23682110566017,rotation:0,type:"rectangle",label:"6",timestamp:0x194698b888c,metadata:{color:"red",createdBy:"user",modifiedAt:0x194698b888c,version:1,tags:[],isVerified:!1}}]},{id:"image1",src:"https://fastly.picsum.photos/id/106/900/600.jpg?hmac=xA_tP1jGHJrWhLPmViP6lnLck6pqCmDXQP8Q9H1IPgs",annotations:[]},{id:"image2",src:"https://fastly.picsum.photos/id/574/800/601.jpg?hmac=DZb2oYbpWGCSpPwqhs4_H0Uvk2VoizaQWddhQIVhRFE",annotations:[]},{id:"image3",src:"https://fastly.picsum.photos/id/372/800/600.jpg?hmac=911lXwSe0NWznaFWKm3nVrZV7y1IypKxlpDUIVpKxVs",annotations:[]},{id:"image4",src:"https://fastly.picsum.photos/id/1057/800/600.jpg?hmac=YmA5NCeEgXc1TOldOXFtXzaMW1NWH-IG92zNgLmTcDQ",annotations:[]},{id:"image5",src:"https://fastly.picsum.photos/id/705/900/600.jpg?hmac=bzZzT6Zhu_ybVXbEhA8WipVgd9fxGXYNmZgaApMKHBY",annotations:[]}],f=[{id:"image1",src:"https://fastly.picsum.photos/id/727/800/602.jpg?hmac=TXud4Hami5cc6oxCzbuVUHoTIeP-nNVcU8A1VtS11XE",annotations:[{id:"shape:1",x:100,y:100,width:200,height:150,rotation:0,label:"1",timestamp:Date.now(),metadata:{color:"red",createdBy:"user",modifiedAt:Date.now(),version:1,tags:[],isVerified:!1}}]}],x={args:{images:h}},y={args:{images:f}},b={args:{images:h,tools:{eraser:{enabled:!0},text:{enabled:!0}}}},w={args:{images:h,outputTriggerOn:{created:!0,changed:!0,deleted:!0},onAnnotationCreated:e=>{console.log("Annotation created:",e)},onAnnotationChange:e=>{console.log("Annotation changed:",e)},onAnnotationDeleted:e=>{console.log("Annotation deleted:",e)},onImageChange:e=>{console.log("Image changed:",e)},onDone:e=>{console.log("Done clicked:",e)}}},v={args:{images:h,outputTriggerOn:{created:!0,changed:!0,deleted:!0},onDone:e=>{console.log("Auto-triggered on change:",e)}}},S={args:{images:[,,,,,].fill(null).map((e,t)=>({id:`image${t+1}`,src:`https://picsum.photos/800/${600+t}`,annotations:[]})),initialImageIndex:0}},A={args:{images:[{id:"large-image",src:"https://picsum.photos/2000/1500",annotations:[]}]}},C={args:{images:[{id:"small-image",src:"https://picsum.photos/400/300",annotations:[]}]}},j={args:{images:[{id:"small",src:"https://picsum.photos/400/300",annotations:[]},{id:"medium",src:"https://picsum.photos/800/600",annotations:[]},{id:"large",src:"https://picsum.photos/1600/1200",annotations:[]}]}},N=["Basic","WithPreExistingAnnotations","WithCustomTools","WithCallbacks","WithAutoTriggers","WithMultipleImages","WithLargeImage","WithSmallImage","WithMixedSizeImages"];x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages\n  }\n}",...x.parameters?.docs?.source}}},y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: imagesWithAnnotations\n  }\n}",...y.parameters?.docs?.source}}},b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    tools: {\n      eraser: {\n        enabled: true\n      },\n      text: {\n        enabled: true\n      }\n    }\n  }\n}",...b.parameters?.docs?.source}}},w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    outputTriggerOn: {\n      created: true,\n      changed: true,\n      deleted: true\n    },\n    onAnnotationCreated: annotation => {\n      console.log('Annotation created:', annotation);\n    },\n    onAnnotationChange: annotation => {\n      console.log('Annotation changed:', annotation);\n    },\n    onAnnotationDeleted: annotation => {\n      console.log('Annotation deleted:', annotation);\n    },\n    onImageChange: data => {\n      console.log('Image changed:', data);\n    },\n    onDone: data => {\n      console.log('Done clicked:', data);\n    }\n  }\n}",...w.parameters?.docs?.source}}},v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: sampleImages,\n    outputTriggerOn: {\n      created: true,\n      changed: true,\n      deleted: true\n    },\n    onDone: data => {\n      console.log('Auto-triggered on change:', data);\n    }\n  }\n}",...v.parameters?.docs?.source}}},S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: Array(5).fill(null).map((_, i) => ({\n      id: `image${i + 1}`,\n      src: `https://picsum.photos/800/${600 + i}`,\n      annotations: []\n    })),\n    initialImageIndex: 0\n  }\n}",...S.parameters?.docs?.source}}},A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'large-image',\n      src: 'https://picsum.photos/2000/1500',\n      annotations: []\n    }]\n  }\n}",...A.parameters?.docs?.source}}},C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'small-image',\n      src: 'https://picsum.photos/400/300',\n      annotations: []\n    }]\n  }\n}",...C.parameters?.docs?.source}}},j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:"{\n  args: {\n    images: [{\n      id: 'small',\n      src: 'https://picsum.photos/400/300',\n      annotations: []\n    }, {\n      id: 'medium',\n      src: 'https://picsum.photos/800/600',\n      annotations: []\n    }, {\n      id: 'large',\n      src: 'https://picsum.photos/1600/1200',\n      annotations: []\n    }]\n  }\n}",...j.parameters?.docs?.source}}}},"./src/components/loading/index.tsx":function(e,t,a){a.d(t,{Z:()=>m});var n=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),o=a("./node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),r=a("./node_modules/.pnpm/motion@11.17.0_react-dom@18.3.1_react@18.3.1/node_modules/motion/dist/es/framer-motion/dist/es/render/components/motion/proxy.mjs"),s=a("./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");let i=100,d=2,l=300,c=90,p="Loading...",u=!0;function m(e){let{loadingText:t=p,className:a="",content:m="",children:g,isLoading:h=!1,progressInterval:f=i,progressIncrement:x=d,expandDelay:y=l,maxAutoProgress:b=c,autoProgress:w=u,contentClassName:v="",loadingSpinnerClassName:S="",progressBarClassName:A=""}=e,[C,j]=(0,s.useState)({progress:0,showContent:!1,expanded:!1}),N=(0,s.useRef)(null),[_,I]=(0,s.useState)(0);return(0,s.useEffect)(()=>{h?j({progress:0,showContent:!1,expanded:!1}):(m||g)&&(j(e=>({...e,showContent:!0})),setTimeout(()=>{j(e=>({...e,expanded:!0}))},y))},[h,m,g,y]),(0,s.useEffect)(()=>{if(!w||!h)return;let e=setInterval(()=>{j(e=>({...e,progress:e.progress>=b?b:e.progress+x}))},f);return()=>clearInterval(e)},[h,w,b,x,f]),(0,s.useEffect)(()=>{!h&&C.progress<100&&j(e=>({...e,progress:100}))},[h]),(0,s.useEffect)(()=>{N.current&&I(N.current.scrollHeight+32)},[C.showContent]),(0,n.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,n.jsx)("div",{className:"transition-all duration-500 ease-out transform",children:(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:(0,o.W)("relative bg-white overflow-hidden","transition-all duration-500 ease-in-out",C.showContent?"rounded-[16px] border border-[#e5e7eb]":"rounded-2xl border border-[#e5e7eb]",C.expanded?"transform-none":"scale-95 opacity-90","shadow-sm",C.showContent&&"animate-expand-width",a),style:{height:C.expanded?_||"auto":"40px"},children:(0,n.jsx)("div",{className:(0,o.W)("px-6 flex items-center h-full justify-between","transition-all duration-500 ease-in-out",C.showContent&&"animate-slide-content",C.showContent&&"py-4"),children:C.showContent?g?(0,n.jsx)("div",{ref:N,className:(0,o.W)("w-full transition-all duration-500 ease-in-out",C.expanded?"opacity-100":"opacity-0",v),children:g}):m?(0,n.jsx)("div",{ref:N,className:(0,o.W)("w-full transition-all duration-500 ease-in-out",C.expanded?"opacity-100":"opacity-0",v),children:(0,n.jsx)("div",{className:"prose prose-gray max-w-none py-4",children:m.split("\n\n").map((e,t)=>(0,n.jsx)("p",{className:"mb-4 text-[#181b25] leading-relaxed",children:e},t))})}):null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("span",{className:"text-[14px] font-medium text-[#181b25] whitespace-nowrap",children:t})}),(0,n.jsx)(r.E.div,{className:(0,o.W)("h-4 w-4 border-2 border-[#9672e4] border-t-transparent rounded-full ml-3",S),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,n.jsx)("div",{className:(0,o.W)("absolute bottom-0 left-0 h-[2px] bg-gradient-to-r from-[#9672e4] to-[#e0daff] transition-all duration-100",A),style:{width:`${C.progress}%`}})]})})})})})}m.__docgenInfo={description:"",methods:[],displayName:"Loading",props:{loadingText:{required:!1,tsType:{name:"string"},description:"Text displayed during the loading state",defaultValue:{value:"'Loading...'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Additional className for the main container",defaultValue:{value:"''",computed:!1}},content:{required:!1,tsType:{name:"string"},description:"Content to display after loading completes. Can be a string or React nodes",defaultValue:{value:"''",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"React nodes to display after loading completes"},isLoading:{required:!1,tsType:{name:"boolean"},description:"Controls the loading state",defaultValue:{value:"false",computed:!1}},progressInterval:{required:!1,tsType:{name:"number"},description:"Interval (in ms) between progress updates. Default: 100",defaultValue:{value:"100",computed:!1}},progressIncrement:{required:!1,tsType:{name:"number"},description:"Amount to increment progress by each interval. Default: 2",defaultValue:{value:"2",computed:!1}},expandDelay:{required:!1,tsType:{name:"number"},description:"Delay (in ms) before expanding the container to show content. Default: 300",defaultValue:{value:"300",computed:!1}},maxAutoProgress:{required:!1,tsType:{name:"number"},description:"Maximum progress value for auto-progress. Default: 90",defaultValue:{value:"90",computed:!1}},autoProgress:{required:!1,tsType:{name:"boolean"},description:"Enable/disable automatic progress animation. Default: true",defaultValue:{value:"true",computed:!1}},contentClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the content container",defaultValue:{value:"''",computed:!1}},loadingSpinnerClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the loading spinner",defaultValue:{value:"''",computed:!1}},progressBarClassName:{required:!1,tsType:{name:"string"},description:"Additional className for the progress bar",defaultValue:{value:"''",computed:!1}}}}}}]);